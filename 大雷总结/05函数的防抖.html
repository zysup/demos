<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>防抖</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        list-style: none;
      }

      #boss {
        /* height: 80vh; */
        max-height: 80vh;
        /* min-height: 80vh; */
        width: 80vw;
        border: 1px solid red;
        overflow-y: auto;
      }

      .item {
        height: 300px;
        /* width: 100%; */
        margin-top: 10px;
        background-color: aqua;
        font-size: 50px;
      }
    </style>
  </head>

  <body>
    <div id="boss" onclick="test11()">
      <div class="item">1</div>
      <div class="item">2</div>
      <div class="item">3</div>
      <div class="item">4</div>
      <div class="item">5</div>
      <div class="item">6</div>
    </div>
  </body>
  <script>
    var timer = null;
    var timer2 = null;
    var boss = document.getElementById("boss");
    // console.log(boss);
    boss.onscroll = myscroll;
    // boss.onclick=test11;
    // console.log(myscroll);
    function test11() {
      clearTimeout(timer2);
      timer2 = setTimeout(() => {
        console.log("qwe");
      }, 1000);
    }

    function myscroll() {
      var scrollTop = boss.scrollTop; //滚动条滚动的距离
      var scrollHeight = boss.scrollHeight; //2000
      var clientHeight = boss.clientHeight; //屏幕的内容高度
      var maxTop = scrollHeight - clientHeight;
      console.log(scrollTop, scrollHeight, clientHeight);

      if (scrollTop >= maxTop - 10) {
        //到底了底部
        console.log("到底底部");
        clearTimeout(timer);

        timer = setTimeout(function () {
          console.log("执行");

          for (i of [7, 8, 9]) {
            var item = document.createElement("div");
            item.className = "item";
            item.innerHTML = "我是新产生的";
            boss.appendChild(item);
            console.log(i);
          }
        }, 2000);
      }
    }
  </script>
</html>
